/*!
 * 
 * 	drivewealth-javascript - JavaScript bindings for the DriveWealth API
 * 	Author: John Shammas
 * 	Version: v1.0.0
 * 	Url: https://github.com/drivewealth/drivewealth-javascript
 * 	License(s): ISC
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.drivewealth=t():e.drivewealth=t()})(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o),i=n(4),a=r(i),s=n(8),c=r(s),l=n(10),f=r(l),d=n(7),p=r(d),y=n(9),m=r(y),h=n(11),v=r(h),g=n(6),D=r(g),I=n(3),S=n(2),T=r(S);t.default={ENVIRONMENTS:I.ENVIRONMENTS,Account:u.default,Config:I.Config,Error:a.default,Funding:c.default,Instrument:f.default,Order:p.default,Reports:m.default,User:v.default,Sessions:D.default,setup:I.setup,request:T.default},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=r(a),c=n(6),l=r(c),f=n(7),d=r(f),p=n(8),y=r(p),m=n(9),h=r(m),v=function(){function e(t){u(this,e);for(var n=["accountID","userID","accountNo","accountType","currencyID","ibID","margin","nickname","openedWhen","patternDayTrades","status","tradingType","accountMgmtType","commissionSchedule"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}}return i(e,[{key:"getBlotter",value:function(e,t){e&&!t&&(t=e,e=null),(0,s.default)({method:"GET",endpoint:"/users/"+this.userID+"/accountSummary/"+this.accountID+(e?"/"+e:""),sessionKey:l.default.get(this.userID)},function(n){n.orders&&(n.orders=n.orders.map(function(e){return new d.default(e)})),t&&t(null,e?n[e]:n)},function(e){return t&&t(e)})}},{key:"getPerformance",value:function(){var e="",t=void 0;if(3===arguments.length){t=arguments[2];var n=Array.prototype.slice.call(arguments),r=n[0],o=n[1];e+="/dateRange?",e+="startDate="+r.getFullYear()+("0"+(r.getMonth()+1)).slice(-2)+("0"+r.getDate()).slice(-2),e+="&endDate="+o.getFullYear()+("0"+(o.getMonth()+1)).slice(-2)+("0"+o.getDate()).slice(-2)}else 2===arguments.length?(t=arguments[1],e+="/history?period="+arguments[0]):t=arguments[0];(0,s.default)({method:"GET",endpoint:"/users/"+this.userID+"/accountPerformance/"+this.accountID+e,sessionKey:l.default.get(this.userID)},function(e){t&&t(null,e.performance)},function(e){return t&&t(e)})}},{key:"placeOrder",value:function(e,t,n){var r={accountID:this.accountID,accountNo:this.accountNo,accountType:this.accountType,userID:this.userID};return d.default.create(e,r,t,n)}},{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return e.userID=this.userID,e.accountID=this.accountID,y.default.getFundingMethods(e,t)}},{key:"getTransactions",value:function(e,t,n){return h.default.getTransactions(this.userID,this.accountNo,e,t,n)}},{key:"getPlacedOrders",value:function(e,t,n){return h.default.getPlacedOrders(this.userID,this.accountNo,e,t,n)}},{key:"getStatements",value:function(e,t,n){return h.default.getStatements(this.userID,this.accountID,e,t,n)}},{key:"getTaxDocuments",value:function(e,t,n){return h.default.getTaxDocuments(this.userID,this.accountID,e,t,n)}},{key:"getTradeConfirms",value:function(e,t,n){return h.default.getTradeConfirms(this.userID,this.accountID,e,t,n)}},{key:"generateDownloadURL",value:function(e,t){return h.default.generateDownloadURL(this.userID,this.accountID,e,t)}},{key:"extractIDs",value:function(e){return Object.assign({},e,{userID:this.userID,accountID:this.accountID})}},{key:"addSubscription",value:function(t,n){e.addSubscription(this.extractIDs(t),n)}},{key:"updateSubscription",value:function(t,n){e.updateSubscription(this.extractIDs(t),n)}},{key:"cancelSubscription",value:function(t){e.cancelSubscription(this.extractIDs(),t)}}],[{key:"getListForUserID",value:function(t,n){(0,s.default)({method:"GET",endpoint:"/users/"+t+"/accounts",sessionKey:l.default.get(t)},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"create",value:function(t,n,r,o){n===e.TYPES.PRACTICE&&(r={userID:t,responseType:"full",tranAmount:r}),(0,s.default)({method:"POST",endpoint:n===e.TYPES.PRACTICE?"/signups/practice":"/signups/live",sessionKey:l.default.get(t),body:r},function(e){o&&o(null,e)},function(e){return o&&o(e)})}},{key:"changeSubscription",value:function(e,t,n){var r=t.userID,u=t.accountID,i=t.planID,a=t.paymentID,c={method:e,endpoint:"/users/"+r+"/accounts/"+u+"/subscriptions",sessionKey:l.default.get(r),body:"DELETE"!==e&&o({planID:i},a.startsWith("card")?"cardID":"bankAccountID",a)};(0,s.default)(Object.keys(c).filter(function(e){return c[e]}).reduce(function(e,t){return Object.assign({},e,o({},t,c[t]))},{}),function(e){n&&n(null,e)},function(e){n&&n(e)})}},{key:"addSubscription",value:function(t,n){e.changeSubscription("POST",t,n)}},{key:"updateSubscription",value:function(t,n){e.changeSubscription("PUT",t,n)}},{key:"cancelSubscription",value:function(t,n){e.changeSubscription("DELETE",t,n)}},{key:"BLOTTER_TYPES",get:function(){return{CASH:"cash",ORDERS:"orders",TRANSACTIONS:"transactions",POSITIONS:"positions",ALL:null}}},{key:"STATUSES",get:function(){return{PENDING:1,OPEN:2,OPEN_NO_NEW_TRADES:3,CLOSED:9}}},{key:"TYPES",get:function(){return{PRACTICE:1,LIVE:2}}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){var r=e.method,i=void 0===r?"GET":r,a=e.endpoint,s=e.sessionKey,c=e.body,l=e.addlHeaders,f=void 0===l?{}:l,d=e.host,p=void 0===d?o.HOSTS.API:d,y={Accept:"application/json"};"POST"!==i&&"PUT"!==i&&"PATCH"!==i||(y["Content-Type"]="application/json"),s&&(y["x-mysolomeo-session-key"]=s);for(var m in f)y[m]=f[m];a=o.Config.env[p]+a,"application/json"===y["Content-Type"]&&(c=JSON.stringify(c)),o.Config.httpImpl(i,a,y,c,function(e,r,o){var i=r["Content-Type"]||r["content-type"]||"";if(o&&-1!==i.indexOf("application/json"))try{o=JSON.parse(o)}catch(e){}if("2"===String(e)[0]||"3"===String(e)[0])t(o,e,r);else{var a=void 0,s=void 0;o&&(s=o.message||JSON.stringify(o)),a=401==e?new u.DriveWealthSessionError(s):new u.DriveWealthError(s),n(a,o,e,r)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(3),u=n(4);e.exports=t.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.env,n=e.httpImpl,r=e.appTypeID,o=e.appVersion,u=e.wlpID,a=void 0===u?"DW":u,s=e.appsPartnerID,c=e.referralCode;i.env=t,i.httpImpl=n,i.appTypeID=r,i.appVersion=o,i.wlpID=a,i.appsPartnerID=s||a,i.referralCode=c}Object.defineProperty(t,"__esModule",{value:!0});var o,u;t.setup=r;var i=t.Config={env:null,httpImpl:null,appTypeID:null,appVersion:null,wlpID:null,appsPartnerID:null,referralCode:null},a=t.HOSTS={API:"api",APPS:"apps",REPORTS:"reports"};t.ENVIRONMENTS={UAT:(o={},n(o,a.API,"http://api.drivewealth.io/v1"),n(o,a.APPS,"http://apps.drivewealth.io"),n(o,a.REPORTS,"http://reports.drivewealth.io"),o),PROD:(u={},n(u,a.API,"https://api.drivewealth.net/v1"),n(u,a.APPS,"https://apps.drivewealth.com"),n(u,a.REPORTS,"https://reports.drivewealth.net"),u)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DriveWealthSessionError=t.DriveWealthError=void 0;var i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=t.DriveWealthError=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(a.default),c=t.DriveWealthSessionError=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(a.default);t.default={DriveWealthError:s,DriveWealthSessionError:c}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e));return o.name=o.constructor.name,o.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(o,o.constructor):o.stack=new Error(e).stack,o}return o(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._keys={},this._mainUser=null}return r(e,[{key:"save",value:function(e,t){this._keys[e]=t,this._mainUser=e}},{key:"get",value:function(e){return this._keys[e]}},{key:"getAny",value:function(){return this._keys[this._mainUser]}},{key:"remove",value:function(e){delete this._keys[e]}}]),e}(),u=t.sessions=new o;t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=r(a),c=n(6),l=r(c),f=Number.POSITIVE_INFINITY,d=function(){function e(t){u(this,e);for(var n=["orderID","accountID","userID","cumQty","accountNo","comment","commission","createdByID","createdWhen","executedWhen","grossTradeAmt","instrumentID","leavesQty","orderNo","orderQty","side","autoStop","symbol","effectivePrice"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}this.rejectionReason=t.ordRejReason,this.status=t.ordStatus,this.type=t.ordType||t.orderType,this.price=t.stopPrice||t.limitPrice||t.price}return i(e,[{key:"cancel",value:function(e){(0,s.default)({method:"DELETE",endpoint:"/orders/"+this.orderID,sessionKey:l.default.get(this.userID)},function(){e&&e(null)},function(t){return e&&e(t)})}}],[{key:"cancel",value:function(e,t,n){(0,s.default)({method:"DELETE",endpoint:"/orders/"+e,sessionKey:l.default.get(t)},function(){n&&n(null)},function(e){return n&&n(e)})}},{key:"getByID",value:function(t,n,r){(0,s.default)({method:"GET",endpoint:"/orders/"+t,sessionKey:l.default.get(n)},function(t){r&&r(null,new e(t))},function(e){return r&&r(e)})}},{key:"create",value:function(t,n,r,o){var u=n.accountID,i=n.accountNo,a=n.userID,c=n.accountType,f=r.instrument,d=r.side,p=r.qty,y=r.amountCash,m=r.comment,h=r.autoStop,v=r.price,g=r.waitForFill,D=void 0===g||g,I=r.fillRetryInterval,S=void 0===I?1e3:I,T=r.fillMaxRetries,E=void 0===T?10:T;if(y&&p)throw new Error('"qty" and "amountCash" are mutually exclusive.');if(t!==e.TYPES.MARKET&&!v)throw new Error('Limit and stop orders require a "price."');if(t!==e.TYPES.MARKET&&h)throw new Error('"autoStop" is only allowed for market orders.');(0,s.default)({method:"POST",endpoint:"/orders",sessionKey:l.default.get(a),body:{instrumentID:f.instrumentID||f.id||f,accountID:u,accountNo:i,userID:a,accountType:c,ordType:t,side:d,orderQty:p||void 0,amountCash:y||void 0,comment:m,autoStop:h,price:t===e.TYPES.STOP?v:void 0,limitPrice:t===e.TYPES.LIMIT?v:void 0}},function(n){if(t!==e.TYPES.MARKET&&(E=1),!D)return o&&o(null,n.orderID);var r=E,u=function t(){r--,e.getByID(n.orderID,a,function(n,u){return n?o&&o(n):r<=0?o&&o(null,u):u.status!==e.STATUSES.NEW&&u.status!==e.STATUSES.PARTIAL_FILL?o&&o(null,u):void setTimeout(t,S)})};setTimeout(u,S)},function(e){return o&&o(e)})}},{key:"createCart",value:function(t,n,r){var u=t.accountID,i=t.accountNo,a=t.userID,c=t.accountType,f=n.orders,d=n.waitForFill,p=void 0===d||d,y=n.fillRetryInterval,m=void 0===y?500:y,h=n.fillMaxRetries,v=void 0===h?10:h;(0,s.default)({method:"POST",endpoint:"/orders",sessionKey:l.default.get(a),body:f.map(function(t){return{instrumentID:t.instrument.instrumentID||t.instrument.id||t.instrument,accountID:u,accountNo:i,userID:a,accountType:c,ordType:e.TYPES.MARKET,side:e.SIDES.BUY,orderQty:t.qty?t.qty:void 0,amountCash:t.amountCash?t.amountCash:void 0,comment:t.comment,autoStop:t.autoStop}})},function(t){var n=t.reduce(function(e,t,n){return Object.assign({},e,o({},f[n].referenceID,t))},{});if(!p)return r&&r(null,n);var u=v;t=t.map(function(e,t){return Object.assign({},e,{referenceID:f[t].referenceID})});var i=function o(){if(u<=0)return r&&r(null,t);u--,Promise.all(t.map(function(t){return new Promise(function(r,o){e.getByID(t.orderID,a,function(e,o){if(e)return r();n[t.referenceID]=o,r()})})})).then(function(){var t=!1;for(var u in n){var i=n[u].status;if(!i||i===e.STATUSES.NEW||i===e.STATUSES.PARTIAL_FILL){t=!0;break}}if(!t)return r&&r(null,n);setTimeout(o,m)})};setTimeout(i,m)},function(e){return r&&r(e)})}},{key:"estimateCommission",value:function(t,n){t=Array.isArray(t)?t:[t];var r=0,o=0,u=void 0,i=n.basketSchedule;if(i&&i.schedule){var a=!0,s=!1,c=void 0;try{for(var l,d=i.schedule[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var p=l.value;if(p.basketSize===t.length){u=p.basketPrice;break}}}catch(e){s=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw c}}}var y={},m=!0,h=!1,v=void 0;try{for(var g,D=t[Symbol.iterator]();!(m=(g=D.next()).done);m=!0){var I=g.value,S=I.qty,T=I.marketPrice,E=I.side,b=I.referenceID,O=S<1?n.fractionalRate:n.baseRate;O+={NEAREST:Math.round,CEIL:Math.ceil,FLOOR:Math.floor}[n.shareAmountRounding](Math.max(0,S-n.baseShares))*n.excessRate;var P=0,k=0;n.passThroughFees&&E===e.SIDES.SELL&&(k=S*T*119e-6,k=Math.min(5.95,k),k=Math.max(.01,k),S>=1&&(P=Math.floor(S)*T*231e-7,P=Math.min(f,P),P=Math.max(.01,P)));var w=O+P+k;r+=w,o+=P+k,y[b]={total:w,commission:O,fees:{sec:P,taf:k}}}}catch(e){h=!0,v=e}finally{try{!m&&D.return&&D.return()}finally{if(h)throw v}}return{total:u?u+o:r,multipleOrderDelta:u?u-r:0,byOrder:y}}},{key:"SIDES",get:function(){return{BUY:"B",SELL:"S"}}},{key:"TYPES",get:function(){return{MARKET:"1",LIMIT:"2",STOP:"3"}}},{key:"STATUSES",get:function(){return{NEW:"0",PARTIAL_FILL:"1",FILL:"2",CANCELED:"4",REJECTED:"8"}}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(6),c=r(s),l=n(3),f=function(){function e(){o(this,e)}return u(e,null,[{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userID,n=e.accountID,r=e.language,o=e.minAmount,u=e.maxAmount,i=e.amount,s=e.filters,f=void 0===s?{}:s,d=arguments[1];if(i&&(o||u))throw new Error('"amount" is not compatible with "minAmount" or "maxAmount."');var p="partner="+l.Config.appsPartnerID+"&userID="+t+"&accountID="+n;r&&(p+="&language="+r),o&&(p+="&minAmount="+o),u&&(p+="&maxAmount="+u),i&&(p+="&amount="+i),f.name&&(p+="&filter[name]="+f.name),f.country&&(p+="&filter[country]="+f.country),f.currency&&(p+="&filter[currency]="+f.currency),f.allowed&&(p+="&filter[allowed]="+f.allowed),(0,a.default)({method:"GET",host:l.HOSTS.APPS,endpoint:"/funding/methods?"+p,sessionKey:c.default.get(t)},function(e){d&&d(null,e)},function(e){return d&&d(e)})}},{key:"getPastDeposits",value:function(e,t){(0,a.default)({endpoint:"/funding/status",sessionKey:c.default.get(e)},function(e){t&&t(null,e.data)},function(e){return t&&t(e)})}},{key:"getPricing",value:function(e,t){return(0,a.default)({endpoint:"/funding/ach/subscription-plans",sessionKey:c.default.get(e)},function(e){var n=e.data.map(function(e){return[].concat(e).sort(function(e,t){return e.amount-t.amount}).map(function(e){return Object.assign({},e,{amount:Number(e.amount/100)})})})[0];t&&t(null,n)},function(e){return t&&t(e)})}},{key:"ALLOWED_TYPES",get:function(){return{DEPOSIT:"DEPOSIT",WITHDRAW:"WITHDRAW",DEPOSIT_AND_WITHDRAW:"DEPOSIT_AND_WITHDRAW"}}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(3),c=n(6),l=r(c),f=function(){function e(){o(this,e)}return u(e,null,[{key:"getTransactions",value:function(e,t,n,r,o){var u="?sessionKey="+l.default.get(e)+"&ReportName=FinTrans&ReportFormat=JSON&AccountNumber="+t+"&DateStart="+n.toISOString()+"&DateEnd="+r.toISOString()+"&wlpID="+s.Config.wlpID+"&LanguageID=en_US";(0,a.default)({method:"POST",host:s.HOSTS.REPORTS,endpoint:"/DriveWealth"+u,sessionKey:l.default.get(e),body:{}},function(e){o&&o(null,e.transaction||[])},function(e){return o&&o(e)})}},{key:"getPlacedOrders",value:function(e,t,n,r,o){var u="?sessionKey="+l.default.get(e)+"&ReportName=OrderTrans&ReportFormat=JSON&AccountNumber="+t+"&DateStart="+n.toISOString()+"&DateEnd="+r.toISOString()+"&wlpID="+s.Config.wlpID+"&LanguageID=en_US";(0,a.default)({method:"POST",host:s.HOSTS.REPORTS,endpoint:"/DriveWealth"+u,sessionKey:l.default.get(e),body:{}},function(e){o&&o(null,e.transaction)},function(e){return o&&o(e)})}},{key:"getStatements",value:function(e,t,n,r,o){var u="?accountID="+t+"&dateStart="+n.toISOString()+"&dateEnd="+r.toISOString()+"&type=02";(0,a.default)({method:"GET",endpoint:"/statements"+u,sessionKey:l.default.get(e)},function(e){o&&o(null,e)},function(e){return o&&o(e)})}},{key:"getTradeConfirms",value:function(e,t,n,r,o){var u="?accountID="+t+"&dateStart="+n.toISOString()+"&dateEnd="+r.toISOString()+"&type=01";(0,a.default)({method:"GET",endpoint:"/statements"+u,sessionKey:l.default.get(e)},function(e){o&&o(null,e)},function(e){return o&&o(e)})}},{key:"getTaxDocuments",value:function(e,t,n,r,o){var u="?accountID="+t+"&dateStart="+n.toISOString()+"&dateEnd="+r.toISOString()+"&type=03";(0,a.default)({method:"GET",endpoint:"/statements"+u,sessionKey:l.default.get(e)},function(e){o&&o(null,e)},function(e){return o&&o(e)})}},{key:"generateDownloadURL",value:function(e,t,n,r){(0,a.default)({method:"GET",endpoint:"/statements/"+t+"/"+n,sessionKey:l.default.get(e)},function(e){r&&r(null,e.url)},function(e){return r&&r(e)})}},{key:"getSupportedCountries",value:function(e){(0,a.default)({method:"GET",endpoint:"/countries"},function(t){e&&e(null,t)},function(t){return e&&e(t)})}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(6),c=r(s),l=function(){function e(t){o(this,e);for(var n=["instrumentID","name","exchangeID","instrumentTypeID","orderSizeMax","orderSizeMin","orderSizeStep","rateAsk","rateBid","ratePrecision","symbol","tradeStatus","urlImage","urlInvestor","chaikinPgr","priorClose","marketState","fundamentalDataModel"],r=0;r<n.length;r++){var u=n[r];this[u]=t[u]}}return u(e,[{key:"getQuote",value:function(t){return e.getQuote(this.symbol,t)}},{key:"getChartData",value:function(){return 4===arguments.length?e.getChartData(this.instrumentID,arguments[0],arguments[1],arguments[2],arguments[3]):e.getChartData(this.instrumentID,arguments[0],arguments[1],arguments[2])}}],[{key:"getBySymbol",value:function(t,n){var r=t;"string"==typeof t&&(r=[t]),(0,a.default)({method:"GET",endpoint:"/instruments?symbol"+(r.length>1?"s":"")+"="+r.join(","),sessionKey:c.default.getAny()},function(r){r=r.map(function(t){return new e(t)}),n&&n(null,"string"==typeof t?r[0]:r)},function(e){return n&&n(e)})}},{key:"getByID",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];(0,a.default)({method:"GET",endpoint:"/instruments/"+t+(n?"?options=F":""),sessionKey:c.default.getAny()},function(t){r&&r(null,new e(t))},function(e){return r&&r(e)})}},{key:"getAll",value:function(t,n){n||(n=t,t="-1"),(0,a.default)({method:"GET",endpoint:"/instruments?tradeStatus="+t,sessionKey:c.default.getAny()},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"search",value:function(t,n){var r="?";t.symbol&&(r+="symbol="+t.symbol+"&"),t.name&&(r+="name="+t.name+"&"),(0,a.default)({method:"GET",endpoint:"/instruments"+r,sessionKey:c.default.getAny()},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"getQuote",value:function(t,n){var r=!1;Array.isArray(t)||(r=!0,t=[t]),t=t.map(function(t){return t instanceof e?t.symbol:t}),(0,a.default)({method:"GET",endpoint:"/quotes?symbols="+t.join(","),sessionKey:c.default.getAny(),addlHeaders:{Accept:"text/plain"}},function(e){var o={};e=e.split("|").slice(10);var u=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(u=(s=c.next()).done);u=!0){var l=s.value,f=l.split(",");o[f[0]]={bid:Number(f[1]),ask:Number(f[2])}}}catch(e){i=!0,a=e}finally{try{!u&&c.return&&c.return()}finally{if(i)throw a}}r&&(o=o[t[0]]),n&&n(null,o)},function(e){return n&&n(e)})}},{key:"getChartData",value:function(e,t){var n=void 0,r=void 0;if(5===arguments.length){r="dateStart="+arguments[2].toISOString().replace(/\.\d{3}/,"")+"&dateEnd="+arguments[3].toISOString().replace(/\.\d{3}/,""),n=arguments[4]}else r="tradingDays="+arguments[2],n=arguments[3];(0,a.default)({method:"GET",endpoint:"/bars?instrumentID="+e+"&compression="+t+"&"+r,sessionKey:c.default.getAny()},function(e){n&&n(null,e.data.split("|"))},function(e){return n&&n(e)})}},{key:"TRADE_STATUSES",get:function(){return{INACTIVE:"0",ACTIVE:"1",CLOSED:"2"}}},{key:"CHART_COMPRESSIONS",get:function(){return{DAY:0,MINUTE_1:1,MINUTE_5:4,MINUTE_30:8,HOUR:9,WEEK:10}}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(0,p.default)({method:"GET",endpoint:"/users/"+e+"/credit-cards",sessionKey:h.default.get(e)},function(e){t&&t(null,e)},function(e){return t&&t(e)})}function i(e,t,n){return(0,p.default)({method:"POST",endpoint:"/users/"+e+"/credit-cards",sessionKey:h.default.get(e),body:{cardToken:t}},function(e){n&&n(null,e)},function(e){return n&&n(e)})}function a(e,t,n){return(0,p.default)({method:"DELETE",endpoint:"/users/"+e+"/credit-cards/"+t,sessionKey:h.default.get(e)},function(e){n&&n(null,e)},function(e){return n&&n(e)})}function s(e,t,n){(0,p.default)({method:"GET",endpoint:"/users/"+e+"/settings/"+t,sessionKey:h.default.get(e)},function(e){n&&n(null,e.value)},function(e){return n&&n(e)})}function c(e,t){(0,p.default)({method:"GET",endpoint:"/users/"+e+"/settings",sessionKey:h.default.get(e)},function(e){var n={},r=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;n[s.key]=s.value}}catch(e){o=!0,u=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}t&&t(null,n)},function(e){return t&&t(e)})}function l(e,t,n,r){(0,p.default)({method:"POST",endpoint:"/users/"+e+"/settings",sessionKey:h.default.get(e),body:{key:t,value:n}},function(){r&&r(null)},function(e){return r&&r(e)})}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),p=r(d),y=n(3),m=n(6),h=r(m),v=n(1),g=r(v),D=function(){function e(t){o(this,e);for(var n=["countryID","emailAddress","firstName","languageID","lastName","phoneNumber","referralCode","userID","username","wlpID","status","usCitizen","lastLoginWhen","citizenship","addressLine1","addressLine2","city","stateProvince","zipPostalCode"],r=0;r<n.length;r++){var u=n[r];this[u]=t[u]}this.fullName=t.firstName+" "+t.lastName}return f(e,[{key:"getAccounts",value:function(e){return g.default.getListForUserID(this.userID,e)}},{key:"uploadDocument",value:function(t,n,r){return e.uploadDocument(this.userID,t,n,r)}},{key:"getSettings",value:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1];1===arguments.length?c(this.userID,t):s(this.userID,t,n)}},{key:"setSetting",value:function(e,t,n){l(this.userID,e,t,n)}},{key:"unsetSetting",value:function(e,t){(0,p.default)({method:"DELETE",endpoint:"/users/"+this.userID+"/settings/"+e,sessionKey:h.default.get(this.userID)},function(){t&&t(null)},function(e){return t&&t(e)})}},{key:"getStatus",value:function(e){(0,p.default)({method:"GET",endpoint:"/users/"+this.userID+"/status",sessionKey:h.default.get(this.userID)},function(t){e&&e(null,t)},function(t){return e&&e(t)})}},{key:"logout",value:function(){var e=this;(0,p.default)({method:"DELETE",endpoint:"/userSessions/"+h.default.get(this.userID),sessionKey:h.default.get(this.userID)},function(){h.default.remove(e.userID),cb&&cb(null)},function(e){return cb&&cb(e)})}},{key:"listCreditCards",value:function(e){return u(this.userID,e)}},{key:"addCreditCard",value:function(e,t){return i(this.userID,e,t)}},{key:"removeCreditCard",value:function(e,t){return a(this.userID,e,t)}}],[{key:"getSettings",value:function(e,t,n){n?s(e,t,n):c(e,t)}},{key:"setSetting",value:function(e,t,n,r){l(e,t,n,r)}},{key:"getByUserID",value:function(t,n){(0,p.default)({method:"GET",endpoint:"/users/"+t,sessionKey:h.default.get(t)},function(t){n&&n(null,new e(t))},function(e){return n&&n(e)})}},{key:"login",value:function(t,n,r){(0,p.default)({method:"POST",endpoint:"/userSessions",body:{username:t,password:n,appTypeID:y.Config.appTypeID,appVersion:y.Config.appVersion,languageID:"en_US",osType:"unknown",osVersion:"unknown",scrRes:"unknown",ipAddress:"unknown"}},function(t){h.default.save(t.userID,t.sessionKey),e.getByUserID(t.userID,function(e,t){if(e)return r&&r(e);r&&r(null,t)})},function(e){return r&&r(e)})}},{key:"isUsernameAvailable",value:function(e,t){(0,p.default)({method:"GET",endpoint:"/users?username="+e},function(){t&&t(null,!1)},function(e,n){if(404===n)return t&&t(null,!0);t&&t(e)})}},{key:"create",value:function(t){var n=t.username,r=t.password,o=t.firstName,u=t.lastName,i=t.email,a=t.languageID,s=t.referralCode,c=void 0===s?y.Config.referralCode:s,l=t.utmCampaign,f=t.utmContent,d=t.utmMedium,m=t.utmSource,h=t.utmTerm,v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g=arguments[2];g||(g=v,v=!0),(0,p.default)({method:"POST",endpoint:"/signups/live",body:{username:n,password:r,firstName:o,lastName:u,emailAddress1:i,languageID:a,wlpID:y.Config.wlpID,referralCode:c,utmCampaign:l,utmContent:f,utmMedium:d,utmSource:m,utmTerm:h}},function(t){if(v)return e.login(n,r,g);g&&g(null,t)},function(e){return g&&g(e)})}},{key:"update",value:function(e,t){var n=e.userID,r=e.addressLine1,o=e.addressLine2,u=e.city,i=e.countryID,a=e.email,s=e.firstName,c=e.lastName,l=e.languageID,f=e.phoneHome,d=e.phoneWork,y=e.phone,m=e.stateProvince,v=e.zipPostalCode;return(0,p.default)({method:"PUT",endpoint:"/users/"+n,sessionKey:h.default.get(n),body:{addressLine1:r,addressLine2:o,city:u,countryID:i,emailAddress1:a,firstName:s,lastName:c,languageID:l,phoneHome:f,phoneWork:d,phoneMobile:y,stateProvince:m,zipPostalCode:v}},function(e){t&&t(null,e)},function(e){return t&&t(e)})}},{key:"uploadDocument",value:function(e,t,n,r){var o=new FormData;return o.append("token",e),o.append("documentType",n),o.append("documentImage",t),(0,p.default)({method:"POST",endpoint:"/documents",sessionKey:h.default.get(e),addlHeaders:{"Content-Type":"multipart/form-data"},body:o},function(e){r&&r(null,e)},function(e){return r&&r(e)})}},{key:"listCreditCards",value:function(e,t){return u(e,t)}},{key:"addCreditCard",value:function(e,t,n){return i(e,t,n)}},{key:"removeCreditCard",value:function(e,t,n){return a(e,t,n)}},{key:"STATUSES",get:function(){return{PENDING:1,APPROVED:2,REJECTED:3,REVOKED:4,CLOSED:5}}},{key:"DOCUMENT_TYPES",get:function(){return{PHOTO_ID:"Picture ID",PROOF_OF_ADDRESS:"Proof of address",PHOTO_ID_WITH_PROOF_OF_ADDRESS:"Picture ID_Proof of address"}}}]),e}();t.default=D,e.exports=t.default}])});
//# sourceMappingURL=drivewealth.min.js.map
