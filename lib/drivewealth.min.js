/*!
 * 
 * 	drivewealth-javascript - JavaScript bindings for the DriveWealth API
 * 	Author: John Shammas
 * 	Version: v1.0.0
 * 	Url: https://github.com/drivewealth/drivewealth-javascript
 * 	License(s): ISC
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.drivewealth=t():e.drivewealth=t()})(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),i=n(7),a=r(i),s=n(5),l=r(s),c=n(8),f=r(c),d=n(3),p=n(2),y=r(p);t.default={ENVIRONMENTS:d.ENVIRONMENTS,Account:o.default,Instrument:a.default,Order:l.default,User:f.default,setup:d.setup,request:y.default},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(4),l=r(s),c=n(5),f=r(c),d=n(6),p=r(d),y=function(){function e(t){u(this,e);for(var n=["accountID","userID","accountNo","accountType","currencyID","ibID","margin","nickname","openedWhen","patternDayTrades","status","tradingType","accountMgmtType"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}}return o(e,[{key:"getBlotter",value:function(e,t){e&&!t&&(t=e,e=null),(0,a.default)({method:"GET",endpoint:"/users/"+this.userID+"/accountSummary/"+this.accountID+(e?"/"+e:""),sessionKey:l.default.get(this.userID)},function(n){t&&t(null,e?n[e]:n)},function(e){return t&&t(e)})}},{key:"getPerformance",value:function(){var e="",t=void 0;if(3===arguments.length){t=arguments[2];var n=Array.prototype.slice.call(arguments),r=n[0];n[1];e+="/dateRange?",e+="startDate="+r.getFullYear()+(r.getMonth()+1)+r.getDate(),e+="&endDate="+r.getFullYear()+(r.getMonth()+1)+r.getDate()}else 2===arguments.length?(t=arguments[1],e+="/history?period="+arguments[0]):t=arguments[0];(0,a.default)({method:"GET",endpoint:"/users/"+this.userID+"/accountPerformance/"+this.accountID+e,sessionKey:l.default.get(this.userID)},function(e){t&&t(null,e.performance)},function(e){return t&&t(e)})}},{key:"placeOrder",value:function(e,t,n){var r={accountID:this.accountID,accountNo:this.accountNo,accountType:this.accountType,userID:this.userID};return f.default.create(e,r,t,n)}},{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return e.userID=this.userID,e.accountID=this.accountID,p.default.getFundingMethods(e,t)}}],[{key:"getListForUserID",value:function(t,n){(0,a.default)({method:"GET",endpoint:"/users/"+t+"/accounts",sessionKey:l.default.get(t)},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"BLOTTER_TYPES",get:function(){return{CASH:"cash",ORDERS:"orders",TRANSACTIONS:"transactions",POSITIONS:"positions",ALL:null}}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){var r=e.method,o=void 0===r?"GET":r,i=e.endpoint,a=e.sessionKey,s=e.body,l=e.addlHeaders,c=void 0===l?{}:l,f=e.host,d=void 0===f?u.HOSTS.API:f,p={Accept:"application/json"};"POST"!==o&&"PUT"!==o&&"PATCH"!==o||(p["Content-Type"]="application/json"),a&&(p["x-mysolomeo-session-key"]=a);for(var y in c)p[y]=c[y];i=u.Config.env[d]+i,"application/json"===p["Content-Type"]&&(s=JSON.stringify(s)),u.Config.httpImpl(o,i,p,s,function(e,r,u){var o=r["Content-Type"]||r["content-type"]||"";u&&o.indexOf("application/json")!==-1&&(u=JSON.parse(u)),"2"===String(e)[0]||"3"===String(e)[0]?t(u,e,r):n(u,e,r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var u=n(3);e.exports=t.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.env,n=e.httpImpl,r=e.appTypeID,u=e.appVersion,o=e.wlpID,a=void 0===o?"DW":o,s=e.referralCode;i.env=t,i.httpImpl=n,i.appTypeID=r,i.appVersion=u,i.wlpID=a,i.referralCode=s}Object.defineProperty(t,"__esModule",{value:!0});var u,o;t.setup=r;var i=t.Config={env:null,httpImpl:null,appTypeID:null,appVersion:null,referralCode:null},a=t.HOSTS={API:"api",APPS:"apps",REPORTS:"reports"};t.ENVIRONMENTS={UAT:(u={},n(u,a.API,"http://api.drivewealth.io/v1"),n(u,a.APPS,"http://apps.drivewealth.io/"),n(u,a.REPORTS,"http://reports.drivewealth.io/"),u),PROD:(o={},n(o,a.API,"https://api.drivewealth.net/v1"),n(o,a.APPS,"https://apps.drivewealth.com/"),n(o,a.REPORTS,"https://reports.drivewealth.com"),o)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){n(this,e),this._keys={},this._mainUser=null}return r(e,[{key:"save",value:function(e,t){this._keys[e]=t,this._mainUser||(this._mainUser=e)}},{key:"get",value:function(e){return this._keys[e]}},{key:"getAny",value:function(){return this._keys[this._mainUser]}},{key:"remove",value:function(e){delete this._keys[e]}}]),e}(),o=t.sessions=new u;t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(4),l=r(s),c=function(){function e(t){u(this,e);for(var n=["orderID","accountID","userID","cumQty","accountNo","comment","commission","createdByID","createdWhen","executedWhen","grossTradeAmt","instrumentID","leavesQty","orderNo","orderQty","side","autoStop"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}this.rejectionReason=t.ordRejReason,this.status=t.ordStatus,this.type=t.ordType}return o(e,[{key:"cancel",value:function(e){(0,a.default)({method:"DELETE",endpoint:"/orders/"+this.orderID,sessionKey:l.default.get(this.userID)},function(){e&&e(null)},function(t){return e&&e(t)})}}],[{key:"getByID",value:function(t,n,r){(0,a.default)({method:"GET",endpoint:"/orders/"+t,sessionKey:l.default.get(n)},function(t){r&&r(null,new e(t))},function(e){return r&&r(e)})}},{key:"create",value:function(t,n,r,u){var o=n.accountID,i=n.accountNo,s=n.userID,c=n.accountType,f=r.instrument,d=r.side,p=r.qty,y=r.amountCash,m=r.comment,v=r.autoStop,h=r.price,g=r.waitForFill,I=void 0===g||g,D=r.fillRetryInterval,T=void 0===D?500:D,S=r.fillMaxRetries,E=void 0===S?10:S;if(y&&p)throw new Error('"qty" and "amountCash" are mutually exclusive.');if(t!==e.TYPES.MARKET&&!h)throw new Error('Limit and stop orders require a "price."');if(t!==e.TYPES.MARKET&&v)throw new Error('"autoStop" is only allowed for market orders.');(0,a.default)({method:"POST",endpoint:"/orders",sessionKey:l.default.get(s),body:{instrumentID:f.instrumentID||f.id||f,accountID:o,accountNo:i,userID:s,accountType:c,ordType:t,side:d,orderQty:p?p:void 0,amountCash:y?y:void 0,comment:m,autoStop:v,price:t===e.TYPES.STOP?h:void 0,limitPrice:t===e.TYPES.LIMIT?h:void 0}},function(t){if(!e.TYPES.MARKET||!I)return u&&u(null,t.orderID);var n=function n(){E--,e.getByID(t.orderID,s,function(t,r){return t?u&&u(t):E<=0?u&&u(null,r):r.status!==e.STATUSES.NEW&&r.status!==e.STATUSES.PARTIAL_FILL?u&&u(null,r):void setTimeout(n,T)})};setTimeout(n,T)},function(e){return u&&u(e)})}},{key:"SIDES",get:function(){return{BUY:"B",SELL:"S"}}},{key:"TYPES",get:function(){return{MARKET:"1",LIMIT:"2",STOP:"3"}}},{key:"STATUSES",get:function(){return{NEW:"0",PARTIAL_FILL:"1",FILL:"2",CANCELED:"4",REJECTED:"8"}}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(4),l=r(s),c=n(3),f=function(){function e(){u(this,e)}return o(e,null,[{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userID,n=e.accountID,r=e.language,u=e.minAmount,o=e.maxAmount,i=e.amount,s=e.filters,f=void 0===s?{}:s,d=arguments[1];if(i&&(u||o))throw new Error('"amount" is not compatible with "minAmount" or "maxAmount."');var p="partner="+c.Config.wlpID+"&userID="+t+"&accountID="+n;r&&(p+="&language="+r),u&&(p+="&minAmount="+u),o&&(p+="&maxAmount="+o),i&&(p+="&amount="+i),f.name&&(p+="&filter[name]="+f.name),f.country&&(p+="&filter[country]="+f.country),f.currency&&(p+="&filter[currency]="+f.currency),f.allowed&&(p+="&filter[allowed]="+f.allowed),(0,a.default)({method:"GET",host:c.HOSTS.APPS,endpoint:"/funding/methods?"+p,sessionKey:l.default.get(t)},function(e){d&&d(null,e)},function(e){return d&&d(e)})}},{key:"ALLOWED_TYPES",get:function(){return{DEPOSIT:"DEPOSIT",WITHDRAW:"WITHDRAW",DEPOSIT_AND_WITHDRAW:"DEPOSIT_AND_WITHDRAW"}}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(4),l=r(s),c=function(){function e(t){u(this,e);for(var n=["instrumentID","name","exchangeID","instrumentTypeID","orderSizeMax","orderSizeMin","orderSizeStep","rateAsk","rateBid","ratePrecision","symbol","tradeStatus","urlImage","urlInvestor","chaikinPgr","priorClose","marketState","fundamentalDataModel"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}}return o(e,[{key:"getQuote",value:function(t){return e.getQuote(this.symbol,t)}},{key:"getChartData",value:function(){return 4===arguments.length?e.getChartData(this.instrumentID,arguments[0],arguments[1],arguments[2],arguments[3]):e.getChartData(this.instrumentID,arguments[0],arguments[1],arguments[2])}}],[{key:"getBySymbol",value:function(t,n){var r=t;"string"==typeof t&&(r=[t]),(0,a.default)({method:"GET",endpoint:"/instruments?symbol="+r.join(","),sessionKey:l.default.getAny()},function(r){r=r.map(function(t){return new e(t)}),n&&n(null,"string"==typeof t?r[0]:r)},function(e){return n&&n(e)})}},{key:"getByID",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];(0,a.default)({method:"GET",endpoint:"/instruments/"+t+(n?"?options=F":""),sessionKey:l.default.getAny()},function(t){r&&r(null,new e(t))},function(e){return r&&r(e)})}},{key:"getAll",value:function(t,n){n||(n=t,t="-1"),(0,a.default)({method:"GET",endpoint:"/instruments?tradeStatus="+t,sessionKey:l.default.getAny()},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"search",value:function(t,n){var r="?";t.symbol&&(r+="symbol="+t.symbol+"&"),t.name&&(r+="name="+t.name+"&"),(0,a.default)({method:"GET",endpoint:"/instruments"+r,sessionKey:l.default.getAny()},function(t){n&&n(null,t.map(function(t){return new e(t)}))},function(e){return n&&n(e)})}},{key:"getQuote",value:function(t,n){var r=!1;Array.isArray(t)||(r=!0,t=[t]),t=t.map(function(t){return t instanceof e?t.symbol:t}),(0,a.default)({method:"GET",endpoint:"/quotes?symbols="+t.join(","),sessionKey:l.default.getAny(),addlHeaders:{Accept:"text/plain"}},function(e){var u={};e=e.split("|").slice(10);var o=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=c.split(",");u[f[0]]={bid:f[1],ask:f[2]}}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}r&&(u=u[t[0]]),n&&n(null,u)},function(e){return n&&n(e)})}},{key:"getChartData",value:function(e,t){var n=void 0,r=void 0;if(5===arguments.length){var u=arguments[2].toISOString().replace(/\.\d{3}/,""),o=arguments[3].toISOString().replace(/\.\d{3}/,"");r="dateStart="+u+"&dateEnd="+o,n=arguments[4]}else r="tradingDays="+arguments[2],n=arguments[3];(0,a.default)({method:"GET",endpoint:"/bars?instrumentID="+e+"&compression="+t+"&"+r,sessionKey:l.default.getAny()},function(e){n&&n(null,e.data.split("|"))},function(e){return n&&n(e)})}},{key:"TRADE_STATUSES",get:function(){return{INACTIVE:"0",ACTIVE:"1",CLOSED:"2"}}},{key:"CHART_COMPRESSIONS",get:function(){return{DAY:0,MINUTE_1:1,MINUTE_5:4,MINUTE_30:8,HOUR:9,WEEK:10}}}]),e}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),s=n(3),l=n(4),c=r(l),f=n(1),d=r(f),p=function(){function e(t){u(this,e);for(var n=["countryID","emailAddress","firstName","languageID","lastName","phoneNumber","referralCode","userID","username","wlpID","status","usCitizen","lastLoginWhen","citizenship"],r=0;r<n.length;r++){var o=n[r];this[o]=t[o]}}return o(e,[{key:"getAccounts",value:function(e){d.default.getListForUserID(this.userID,e)}},{key:"getSettings",value:function(){1===arguments.length&&this.getAllSettings(arguments[0]);var e=arguments[1];(0,a.default)({method:"GET",endpoint:"/users/"+this.userID+"/settings/"+arguments[0],sessionKey:c.default.get(this.userID)},function(t){e&&e(null,t.value)},function(t){return e&&e(t)})}},{key:"getAllSettings",value:function(e){(0,a.default)({method:"GET",endpoint:"/users/"+this.userID+"/settings",sessionKey:c.default.get(this.userID)},function(t){var n={},r=!0,u=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;n[s.key]=s.value}}catch(e){u=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(u)throw o}}e&&e(null,n)},function(t){return e&&e(t)})}},{key:"setSetting",value:function(e,t,n){(0,a.default)({method:"POST",endpoint:"/users/"+this.userID+"/settings",sessionKey:c.default.get(this.userID),body:{key:e,value:t}},function(){n&&n(null)},function(e){return n&&n(e)})}},{key:"unsetSetting",value:function(e,t){(0,a.default)({method:"DELETE",endpoint:"/users/"+this.userID+"/settings/"+e,sessionKey:c.default.get(this.userID)},function(){t&&t(null)},function(e){return t&&t(e)})}},{key:"getStatus",value:function(){(0,a.default)({method:"GET",endpoint:"/users/"+this.userID+"/status",sessionKey:c.default.get(this.userID)},function(e){cb&&cb(null,e)},function(e){return cb&&cb(e)})}},{key:"logout",value:function(){var e=this;(0,a.default)({method:"DELETE",endpoint:"/userSessions/"+c.default.get(this.userID),sessionKey:c.default.get(this.userID)},function(){c.default.remove(e.userID),cb&&cb(null)},function(e){return cb&&cb(e)})}}],[{key:"getByUserID",value:function(t,n){(0,a.default)({method:"GET",endpoint:"/users/"+t,sessionKey:c.default.get(t)},function(t){n&&n(null,new e(t))},function(e){return n&&n(e)})}},{key:"login",value:function(t,n,r){(0,a.default)({method:"POST",endpoint:"/userSessions",body:{username:t,password:n,appTypeID:s.Config.appTypeID,appVersion:s.Config.appVersion,languageID:"en_US",osType:"unknown",osVersion:"unknown",scrRes:"unknown",ipAddress:"unknown"}},function(t){c.default.save(t.userID,t.sessionKey),e.getByUserID(t.userID,function(e,t){return e?r&&r(e):void(r&&r(null,t))})},function(e){return r&&r(e)})}},{key:"isUsernameAvailable",value:function(e,t){(0,a.default)({method:"GET",endpoint:"/users?username="+e},function(){t&&t(null,!1)},function(e,n){return 404===n?t&&t(null,!0):void(t&&t(e))})}},{key:"create",value:function(t,n){var r=t.username,u=t.password,o=t.firstName,i=t.lastName,l=t.email,c=t.languageID,f=t.referralCode,d=void 0===f?s.Config.referralCode:f,p=t.utmCampaign,y=t.utmContent,m=t.utmMedium,v=t.utmSource,h=t.utmTerm;(0,a.default)({method:"POST",endpoint:"/signups/live",body:{username:r,password:u,firstName:o,lastName:i,emailAddress1:l,languageID:c,wlpID:s.Config.wlpID,referralCode:d,utmCampaign:p,utmContent:y,utmMedium:m,utmSource:v,utmTerm:h}},function(t){return e.login(r,u,n)},function(e){return n&&n(e)})}},{key:"STATUSES",get:function(){return{PENDING:1,APPROVED:2,REJECTED:3,REVOKED:4,CLOSED:5}}}]),e}();t.default=p,e.exports=t.default}])});
//# sourceMappingURL=drivewealth.min.js.map
